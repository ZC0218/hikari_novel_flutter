name: Build Windows EXE

on:
  workflow_dispatch:   # 手动触发
  push:
    branches:
      - main           # 你也可以改为 develop 或其他分支

jobs:
  build-windows:
    runs-on: windows-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Set up Flutter
      uses: subosito/flutter-action@v2
      with:
        flutter-version: "stable"

    - name: Enable Windows Desktop
      run: flutter config --enable-windows-desktop

    - name: Install dependencies
      run: flutter pub get

    - name: Build Windows Release
      run: flutter build windows --release

    - name: Upload artifact
      uses: actions/upload-artifact@v3
      with:
        name: hikari-windows-exe
        path: build/windows/x64/runner/Release/
